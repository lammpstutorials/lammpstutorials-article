# inserting styrene molecules around a periodic CNT

units real
boundary p p p
atom_style full

kspace_style pppm 1.0e-5
pair_style lj/class2/coul/long 8.5
angle_style class2
bond_style class2
dihedral_style class2
improper_style class2

special_bonds lj/coul 0 0 1
pair_modify tail yes mix sixthpower

read_data CNT.data group CNT &
  extra/special/per/atom 20

molecule styrene styrene.lmpmol

create_atoms 0 random 200 8305 NULL overlap 2.75 &
  maxtry 500 mol styrene 7687

minimize 1.0e-4 1.0e-6 100 1000

velocity all create 300.0 4928459 dist gaussian &
  rot yes loop local
fix 1 all nvt temp 300 300 100

fix 2 all deform 1 y erate -0.0001 &
  z erate -0.0001
variable rho equal density
fix 3 all halt 10 v_rho > 0.9 error continue

thermo 500
thermo_style custom step temp pe etotal press &
  density

run 9000

unfix 2
unfix 3
reset_timestep 0

dump mydmp all image 1000 dump.mixing.*.ppm &
  type type shiny 0.1 box no 0.01 &
  view 90 0 zoom 1.5 fsaa yes bond atom 0.5
dump_modify mydmp backcolor white &
  acolor cp gray acolor c=1 gray &
  acolor c= gray acolor c1 gray &
  acolor c2 gray acolor c3 gray &
  adiam cp 0.3 adiam c=1 0.3 &
  adiam c= 0.3 adiam c1 0.3 &
  adiam c2 0.3 adiam c3 0.3 &
  acolor hc white adiam hc 0.15

run 9999

fix centralize CNT recenter 0 0 0 units box shift all
run 1

write_data CNT-PS-mix.data
